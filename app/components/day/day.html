<div class="container">
  <section class="module col-sm-12">
    <section class="module col-sm-12 col-md-12">
      <div class="module-body">
        <h1 class="voice voice-brand">Összesítő <b>{{vm.datenum}}</b></h1>
        <hr>
        <div class="col-sm-3">
          <div>
            <h2 class="voice voice-brand">
              <i class="icon-filter"></i> Szűrő</h2>
            <p>
              Válassz az alábbi dátum mezőből kijelezni kívánt napot:
            </p>
            <div class="input-group col-sm-12">
              <span class="input-group-addon">Dátumra:</span>
              <input type="text" class="datepicker form-control" ng-model="vm.date" ng-change="vm.getrewinder()" setdate="0" end="{{vm.edate}}"
                ng-disabled="vm.load">
            </div>
            <div class="input-group col-sm-12">
              <span class="input-group-addon">Méter/AEQ:</span>
              <select ng-model="vm.meteraeq" class="form-control">
                <option value="aeq">AEQ</option>
                <option value="meter">Méter</option>
              </select>
            </div>
            <div class="progress progress-info progress-striped active" ng-hide="!vm.load">
              <div class="progress-bar" style="width: 100%">
                <p class="text-center">Frissítés...</p>
              </div>
            </div>
            <br>
          </div>
        </div>
        <div class="col-sm-6">
          <table class="table mytable table-condensed">
            <thead>
              <tr>
                <th>Szak</th>
                <th>Áthengerlő</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="shn in [1,3] track by $index">
                <td><h3><strong>{{shn | shift:vm.date}}</strong> - {{shn==1?'DE':'ÉJ'}}</h3></td>
                <td ng-if="vm.meteraeq=='aeq'"><h3 class="{{vm.iconize(((vm.data | filter:{ ShiftNum: shn}) | sumField:'ProducedLength_aeq'|number:2),shn)}}"><sup class="targetTag">{{vm.target(shn) | number:2 }}</sup><strong>{{(vm.data | filter:{ ShiftNum: shn}) | sumField:'ProducedLength_aeq'|number:2}}</strong></h3></td>
                <td ng-if="vm.meteraeq=='meter'"><h3 class="{{vm.iconize(((vm.data | filter:{ ShiftNum: shn}) | sumField:'ProducedLength'),shn)}}"><sup class="targetTag">{{vm.target(shn)|number:2}}</sup><strong>{{(vm.data | filter:{ ShiftNum: shn}) | sumField:'ProducedLength'}}</strong></h3></td>
              </tr>
              <tr>
                <td><h3><strong>Össz:</strong></h3></td>
                <td ng-if="vm.meteraeq=='aeq'"><h3 class="{{vm.iconize((vm.data  | sumField:'ProducedLength_aeq'|number:2),0)}}"><sup class="targetTag">{{vm.target(0) | number:2 }}</sup><strong>{{(vm.data | sumField:'ProducedLength_aeq')|number:2}}</strong></h3></td>
                <td ng-if="vm.meteraeq=='meter'"><h3 class="{{vm.iconize((vm.data  | sumField:'ProducedLength'),0)}}"><sup class="targetTag">{{vm.target(0)|number:2}}</sup><strong>{{(vm.data | sumField:'ProducedLength')}}</strong></h3></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
    <section class="module col-sm-12 col-md-12">
      <div class="module-body">
        <div class="col-sm-3">
            <strong>Szűrés Szakra</strong>
            <div class="input-group col-sm-12">
              <span class="input-group-addon">Szak:</span>
              <select ng-model="vm.actshiftnum" class="form-control">
                <option value="">Mind</option>
                <option ng-repeat="sh in vm.shifts" value="{{sh}}">{{sh == 1?'DE':'ÉJ'}}</option>
              </select>
            </div>
        </div>
        <div class="col-sm-6">
          <table class="table detailsTable">
            <thead>
              <tr>
                <th>Rewinder</th>
                <th>Méter</th>
                <th>AEQ</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="rw in vm.rewinders track by $index">
                <td>{{rw | name_change}}</td>
                <td>{{(vm.data | filter:{ ShiftNum: vm.actshiftnum,MachineName:rw}) | sumField:'ProducedLength'}}</td>
                <td>{{(vm.data | filter:{ ShiftNum: vm.actshiftnum,MachineName:rw}) | sumField:'ProducedLength_aeq'|number:2}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </section>
</div>