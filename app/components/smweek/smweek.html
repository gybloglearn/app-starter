<div class="container">
  <section class="module">
    <div class="module-header">
      <div class="col-sm-12" style="margin-top:20px">
        <div class="col-sm-6">
          <div class="input-group">
            <span class="input-group-addon">Dátum</span>
            <input type="text" class="datepicker form-control" ng-model="vm.startdate" setdate="-1d" end="{{vm.edate}}">
            <span class="input-group-addon">-tól</span>
            <input type="text" class="datepicker form-control" ng-model="vm.enddate" setdate="-1d" end="{{vm.edate}}">
            <span class="input-group-addon">-ig</span>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="input-group myselector">
            <select multiple="multiple" class="form-control" ng-model="vm.sheetmakers">
              <option value="SM1">SM1</option>
              <option value="SM2">SM2</option>
              <option value="SM4">SM4</option>
              <option value="SM5">SM5</option>
              <option value="SM6">SM6</option>
              <option value="SM7">SM7</option>
              <option value="SM8">SM8</option>
              <option value="SM9">SM9</option>
            </select>
            <span class="input-group-addon">gépek</span>
          </div>
        </div>
        <div class="col-sm-2 col-sm-offset-5 text-center">
          <a href="" class="btn btn-primary" ng-click="vm.createdates()" ng-disabled="vm.enddate<vm.startdate">Betöltés</a>
				</div>
				<div class="col-sm-2> col-sm-offset-3 text-right" ng-show="(user.username='113010451' || user.username='212434909' || user.username='212422533')">
					<a href="app/components/PHP/sumsmjson.php?startdate={{vm.startdate}}" class="btn btn-info" ng-disabled="vm.startdate!=vm.enddate">Frissítés</a>
        </div>
      </div>
    </div>
    <div class="module-body">
      <div class="progress progress-success progress-striped active" ng-hide="!vm.loaddata">
        <div class="progress-bar" style="width: 100%">
          <p class="text-center">Frissítés...</p>
        </div>
      </div>
      <div class="col-sm-12">
        <my-chart config="vm.dayavailconfig" id="daych"></my-chart>
      </div>
      <div class="col-sm-8">
        <my-chart config="vm.smavailabilitychartconfig" id="chart"></my-chart>
      </div>
      <div class="col-sm-4">
        <my-chart config="vm.ttlsmavailabilitychartconfig" id="ttlchart"></my-chart>
      </div>
      <div class="col-sm-12">
        <my-chart config="vm.topmconf" id="topm"></my-chart>
      </div>
      <div class="col-sm-12">
        <my-chart config="vm.topsconf" id="tops"></my-chart>
      </div>
      <div class="col-sm-12">
        <my-chart config="vm.toptconf" id="topt"></my-chart>
      </div>

      <div class="row">
        <table class="table table-condensed table-striped">
          <thead>
            <tr>
              <th>Machine</th>
              <th>Ev_Group</th>
              <th>Event_SubGroup</th>
              <th>Maximo szám</th>
              <th>Event_time (sec)</th>
              <th>Event_time (min)</th>
              <th>Event_time (hr)</th>
              <th>Date</th>
              <th>Shift</th>
              <th>Comment</th>
            </tr>
          </thead>
          <thead>
            <tr>
              <th colspan=1>
                <div class="form-group">
                  <select class="form-control" ng-model="vm.search.Machine">
                    <option value="">Mind</option>
                    <option ng-repeat="it in vm.sheetmakers" value="{{it}}">{{it}}</option>
                  </select>
                </div>
              </th>
              <th colspan=1>
                <div class="form-group">
                  <select class="form-control" ng-model="vm.search.Ev_Group">
                    <option value="">Mind</option>
                    <option value="Muszaki technikai okok">Műszaki</option>
                    <option value="Szervezesi veszteseg">Szervezési</option>
                    <option value="Tervezett veszteseg">Tervezett</option>
                  </select>
                </div>
              </th>
              <th>
                <div class="form-group">
                  <select name="" id="" class="form-control" ng-model="vm.search.Event_SubGroup">
                      <option value="">Mind</option>
                    <option ng-repeat="val in (vm.filedatas | filter: vm.search | unique:'Event_SubGroup')" value="{{val.Event_SubGroup}}">{{val.Event_SubGroup}}</option>
                  </select>
                </div>
              </th>
              <th>
                <div class="form-group">
                  <select name="" id="" class="form-control" ng-model="vm.search.Maximo_num">
                      <option value="">Mind</option>
                    <option ng-repeat="val in (vm.filedatas | filter: vm.search | unique:'Maximo_num')" value="{{val.Maximo_num}}">{{val.Maximo_num}}</option>
                  </select>
                </div>
              </th>
              <th style="vertical-align: middle">{{ vm.filedatas | filter: vm.search | sumField:'Event_time' | number:0 }} sec</th>
              <th style="vertical-align: middle">{{ (vm.filedatas | filter: vm.search | sumField:'Event_time' ) / 60 | number: 0}} min</th>
              <th style="vertical-align: middle">{{ (vm.filedatas | filter: vm.search | sumField:'Event_time' ) / 60 / 60 | number: 2}} hr</th>
              <th>
              </th>
              <th>
                <div class="form-group">
                  <select name="" id="" class="form-control" ng-model="vm.search.Shift_Name">
                    <option value="">Mind</option>
                    <option ng-repeat="val in (vm.filedatas | filter: vm.search | unique:'Shift_Name')" value="{{val.Shift_Name}}">{{val.Shift_Name}}</option>
                  </select>
                </div>
              </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="i in vm.filedatas | filter: vm.search | orderBy: 'Event_time': true | limitTo: 25">
              <td>{{i.Machine}}</td>
              <td>{{i.Ev_Group}}</td>
              <td>{{i.Event_SubGroup}}</td>
              <td>{{i.Maximo_num}}</td>
              <td>{{i.Event_time}}</td>
              <td>{{i.Event_time/60 | number: 0}}</td>
              <td>{{i.Event_time/60/60 | number: 2}}</td>
              <td>{{i.timestamp | date: 'yyyy-MM-dd hh:mm:ss'}}</td>
              <td>{{i.Shift_Name}}</td>
              <td>{{i.Comment}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="module-footer"></div>
  </section>
</div>
