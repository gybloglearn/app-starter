<div class="container">
  <section class="module">
    <div class="module-header">
      <div class="col-sm-12" style="margin-top:20px">
        <div class="col-sm-6">
          <div class="input-group">
            <span class="input-group-addon">Dátum</span>
            <input type="text" class="datepicker form-control" ng-model="vm.date" setdate="-1d" end="{{vm.edate}}">
          </div>
        </div>
        <div class="col-sm-6">
          <div class="input-group myselector">
            <select multiple="multiple" class="form-control" ng-model="vm.sheetmakers">
              <option value="SM1">SM1</option>
              <option value="SM2">SM2</option>
              <option value="SM4">SM4</option>
              <option value="SM5">SM5</option>
              <option value="SM6">SM6</option>
              <option value="SM7">SM7</option>
              <option value="SM8">SM8</option>
              <option value="SM9">SM9</option>
            </select>
            <span class="input-group-addon">gépek</span>
          </div>
        </div>
        <div class="col-sm-2 col-sm-offset-5 text-center">
          <a href="" class="btn btn-primary" ng-click="vm.create_allday_data();vm.callsm()" ng-disabled="vm.startdate>vm.enddate">Betöltés</a>
        </div>
      </div>
    </div>
    <div class="module-body">
      <div class="progress progress-success progress-striped active" ng-hide="!vm.loading">
        <div class="progress-bar" style="width: 100%">
          <p class="text-center">Frissítés...</p>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-8">
          <table class="table table-striped">
            <thead>
              <tr>
                <th style="font-size:1.5em">Gép</th>
                <th style="font-size:1.5em">Kieső idő</th>
                <th style="font-size:1.5em">Tervezett veszteség</th>
                <th style="font-size:1.5em">Szervezési veszteség</th>
                <th style="font-size:1.5em">Műszaki technikai okok</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="s in vm.sm">
                <td ng-show="s.id!='SMS'" style="font-size:1.5em">{{s.id}}</td>
                <td ng-show="s.id!='SMS'" style="font-size:1.5em">{{(s.timediff/s.alltime)*100|number:2}}%</td>
                <td ng-show="s.id!='SMS'" style="font-size:1.5em">{{(s.terv/s.alltime)*100|number:2}} %</td>
                <td ng-show="s.id!='SMS'" style="font-size:1.5em">{{(s.szerv/s.alltime)*100|number:2}} %</td>
                <td ng-show="s.id!='SMS'" style="font-size:1.5em">{{(s.musz/s.alltime)*100|number:2}} %</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-2">
          <div class="input-group-btn">
            <a class="btn btn-info" ng-click="vm.exportToCSV()">Adatok mentése</a>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="input-group-btn">
            <a class="btn btn-primary" ng-click="vm.clr()">Megjegyzés törlése</a>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-5">
          <table class="table table-condensed">
            <thead>
              <tr>
                <th style="font-size:1.5em">Veszteségek</th>
                <th style="font-size:1.5em">%</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="s in vm.sm">
                <th ng-show="s.id=='SMS'" style="font-size:1.5em">Kieső idő</th>
                <td ng-show="s.id=='SMS'" style="font-size:1.5em">{{(s.timediff/s.alltime)*100|number:2}}%</td>
              </tr>
              <tr ng-repeat="s in vm.sm">
                <th ng-show="s.id=='SMS'" style="font-size:1.5em">Tervezett veszteség</th>
                <td ng-show="s.id=='SMS'" style="font-size:1.5em"><span class="{{s.terv/s.alltime*100 <= 13?'text-ge-green':'text-ge-red'}}">{{(s.terv/s.alltime)*100|number:2}}
                    %</span></td>
              </tr>
              <tr ng-repeat="s in vm.sm">
                <th ng-show="s.id=='SMS'" style="font-size:1.5em">Szervezési veszteség</th>
                <td ng-show="s.id=='SMS'" style="font-size:1.5em"><span class="{{s.szerv/s.alltime*100 <= 3?'text-ge-green':'text-ge-red'}}">{{(s.szerv/s.alltime)*100|number:2}}
                    %</span></td>
              </tr>
              <tr ng-repeat="s in vm.sm">
                <th ng-show="s.id=='SMS'" style="font-size:1.5em">Műszaki technikai okok</th>
                <td ng-show="s.id=='SMS'" style="font-size:1.5em"><span class="{{s.musz/s.alltime*100 <= 6?'text-ge-green':'text-ge-red'}}">{{(s.musz/s.alltime)*100|number:2}}
                    %</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="col-sm-5">
          <table class="table table-condensed">
            <thead>
              <tr>
                <th colspan="5" class="text-center" style="font-size:1.5em">Napi összes (AEQ)</th>
              </tr>
              <tr>
                <th style="font-size:1.5em">Mennyiség</th>
                <th style="font-size:1.5em">500</th>
                <th style="font-size:1.5em">ZB/ZL</th>
                <th style="font-size:1.5em">ZW</th>
                <th style="font-size:1.5em">Terv</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="font-size:1.5em">SM</td>
                <td style="font-size:1.5em">{{vm.daydata[0].otszaz|number:2}}</td>
                <td style="font-size:1.5em">{{vm.daydata[0].zbzl|number:2}}</td>
                <td style="font-size:1.5em"><span class="{{vm.daydata[0].osszes >= vm.smtarget?'text-ge-green':'text-ge-red'}}">{{vm.daydata[0].osszes|number:2}}</span></td>
                <td><input type="text" ng-model="vm.smtarget"  style="font-size:1.5em"></td>
              </tr>
              <tr>
                <td style="font-size:1.5em">BP</td>
                <td style="font-size:1.5em">{{vm.daydata[0].otszazbp|number:2}}</td>
                <td style="font-size:1.5em">{{vm.daydata[0].zbzlbp|number:2}}</td>
                <td style="font-size:1.5em"><span class="{{vm.daydata[0].osszesbp >= vm.bptarget?'text-ge-green':'text-ge-red'}}">{{vm.daydata[0].osszesbp|number:2}}</span></td>
                <td><input type="text" ng-model="vm.bptarget" style="font-size:1.5em"></td>
              </tr>
              <tr>
                <td style="font-size:1.5em">MIN</td>
                <td style="font-size:1.5em">{{vm.daydata[0].minotszaz|number:2}}</td>
                <td style="font-size:1.5em">{{vm.daydata[0].minzbzl|number:2}}</td>
                <td style="font-size:1.5em"><span class="{{vm.daydata[0].minosszes >= vm.mintarget?'text-ge-green':'text-ge-red'}}">{{vm.daydata[0].minosszes|number:2}}</span></td>
                <td><input type="text" ng-model="vm.mintarget"  style="font-size:1.5em"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>  
    </div>
    <div class="module-footer">
      <div class="col-sm-10">
        <table class="table table-condensed">
          <thead>
            <tr>
              <th colspan="3" class="text-center" style="font-size:1.5em">Veszteség kategóriák</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th style="font-size:1.5em">Tervezett veszteség (kategóriák)</th>
              <th style="font-size:1.5em">Idő (perc)</th>
              <th style="font-size:1.5em">Megjegyzés</th>
            </tr>
            <tr ng-repeat="tv in vm.tervezett track by $index">
              <td ng-show="tv.time>0" style="font-size:1.5em">{{tv.name}}</td>
              <td ng-show="tv.time>0" style="font-size:1.5em">{{tv.time/60|number:0}}</td>
              <td ng-show="tv.time>0"><textarea class="form-control" rows="1"  ng-model="tv.descr"  style="font-size:1.5em">{{tv.descr}}</textarea></td>
            </tr>
            <tr>
              <th style="font-size:1.5em">Szervezési veszteség (kategórák)</th>
              <th style="font-size:1.5em">Idő (perc)</th>
              <th style="font-size:1.5em">Megjegyzés</th>
            </tr>
            <tr ng-repeat="sv in vm.szervezesi track by $index">
              <td ng-show="sv.time>0" style="font-size:1.5em">{{sv.name}}</td>
              <td ng-show="sv.time>0" style="font-size:1.5em">{{sv.time/60|number:0}}</td>
              <td ng-show="sv.time>0"><textarea class="form-control" rows="1"  ng-model="sv.descr"  style="font-size:1.5em">{{sv.descr}}</textarea></td>
            </tr>
            <tr>
              <th style="font-size:1.5em">Műszaki technikai okok (kategóriák)</th>
              <th style="font-size:1.5em">Idő (perc)</th>
              <th style="font-size:1.5em">Megjegyzés</th>
            </tr>
            <tr ng-repeat="mto in vm.muszaki track by $index">
              <td ng-show="mto.time>0" style="font-size:1.5em">{{mto.name}}</td>
              <td ng-show="mto.time>0" style="font-size:1.5em">{{mto.time/60|number:0}}</td>
              <td ng-show="mto.time>0"><textarea class="form-control" rows="1" ng-model="mto.descr" style="font-size:1.5em">{{mto.descr}}</textarea></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</div>