<div class="container">
  <section class="module">
    <div class="module-header">
      <h1 class="text-center">Bökés térkép {{vm.startdatumszam}}-{{vm.enddatumszam}}</h1>
      <div class="col-sm-6" style="margin-top:10px">
        <div class="input-group">
          <span class="input-group-addon">Dátum</span>
          <input type="text" class="datepicker form-control" ng-model="vm.startdatum" setdate="-6d" end="{{vm.edate}}">
          <span class="input-group-addon">-tól</span>
          <input type="text" class="datepicker form-control" ng-model="vm.enddatum" setdate="0d" end="{{vm.edate}}">
          <span class="input-group-addon">-ig</span>
          <div class="input-group-btn">
            <a href="" class="btn btn-primary" ng-click="vm.load();vm.beilleszt()" ng-disabled="vm.enddatum<=vm.startdatum;vm.mtfload">Betöltés</a>
          </div>
        </div>
      </div>
    </div>
    <div class="module-body">
      <div class="progress progress-info progress-striped active" ng-hide="!vm.mtfload">
        <div class="progress-bar" style="width: 100%">
          <p class="text-center">Betöltés</p>
        </div>
      </div>
      <modulmap-dir data="vm.data"></modulmap-dir>
    </div>
    <div class="module-footer">
      <div class="col-sm-6">
        <div class="input-group">
          <span class="input-group-addon">Bökés határ:</span>
          <input type="text" ng-model="vm.bokeshatar" class="form-control">
          <span class="input-group-addon">felett összesen: {{ (vm.data | filter:vm.greater('bt_kat_db1', vm.bokeshatar)).length}} hely van</span>
        </div>
      </div>
      <div class="col-sm-12" style="margin-top:20px">
        <div class="row">
          <div class="progress progress-warning progress-striped active" ng-hide="!vm.tableload">
            <div class="progress-bar" style="width: 100%">
              <p class="text-center">Táblázat frissítése...</p>
            </div>
          </div>
        </div>
        <div class="tray filter-tray top">
          <div class="tray-inner">
            <div class="filter-rule-group">
              <div class="row">
                <div class="col-sm-3">
                  <div class="form-group">
                    <span class="control-label" style="color:#FFFFFF">SheetMaker</span>
                    <select ng-model="search.sheetmaker" class="form-control ng-pristine ng-untouched ng-valid">
                      <option value="">Mind</option>
                      <option ng-repeat="sm in vm.data|unique:'sheetmaker'" value="{{sm.sheetmaker}}">{{sm.sheetmaker}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <span class="control-label" style="color:#FFFFFF">Ford. op.</span>
                    <select ng-model="search.rot" class="form-control ng-pristine ng-untouched ng-valid">
                      <option value="">Mind</option>
                      <option ng-repeat="ford in vm.data|unique:'rot'" value="{{ford.rot}}">{{ford.rot}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <span class="control-label" style="color:#FFFFFF">Sor</span>
                    <select ng-model="search.Sor" class="form-control ng-pristine ng-untouched ng-valid">
                      <option value="">Mind</option>
                      <option ng-repeat="sor in vm.sorok" value="{{sor}}">{{sor}}</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <span class="control-label" style="color:#FFFFFF">Oszlop</span>
                    <select ng-model="search.Oszlop" class="form-control ng-pristine ng-untouched ng-valid">
                      <option value="">Mind</option>
                      <option ng-repeat="osz in vm.oszlopok" value="{{osz}}">{{osz}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <span class="input-group-addon">Bökés összesen: {{ vm.data| filter:vm.greater('bt_kat_db1', vm.bokeshatar) | filter: search | sumField:'bt_kat_db1'
                  }}
                </span>
              </div>
            </div>
          </div>
        </div>
        <table class="table table-hover table-condensed table-bordered">
          <thead>
            <tr>
              <th class="text-center">ID</th>
              <th class="text-center">Név</th>
              <th class="text-center">SheetMaker</th>
              <th class="text-center">SM operátor</th>
              <th class="text-center">Potting</th>
              <th class="text-center">Ford. op.</th>
              <th class="text-center">Ford. dátum</th>
              <th class="text-center">Kád</th>
              <th class="text-center">Bökés</th>
              <th class="text-center">Sor</th>
              <th class="text-center">Oszlop</th>
              <th class="text-center">Hiba megnevezése</th>
              <!--th>Modul részletek</th-->
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in vm.data| filter:vm.greater('bt_kat_db1', vm.bokeshatar) | orderBy:'-bt_kat_db1' | filter: search track by $index">
              <td align="center">{{item.modul_id1}}</td>
              <td align="center">{{item.modtype}}</td>
              <td align="center">{{item.sheetmaker}}</td>
              <td align="center">{{item.smop}}</td>
              <td align="center">{{item.potting}}</td>
              <td align="center">{{item.rot}}</td>
              <td align="center">{{item.rotdate}}</td>
              <td align="center">{{item.tank}}</td>
              <td align="center">{{item.bt_kat_db1}}</td>
              <td align="center">{{item.Sor}}</td>
              <td align="center">{{item.Oszlop}}</td>
              <td align="center">{{item.KatName1}}</td>
              <!--td>
              <div class="text-center">
                <a class="btn btn-primary" ng-click="vm.actcode=item.modul" target="_blank" href="../Modulhistory/#/history/{{item.modul}}">History</a>
              </div>
            </td-->
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</div>