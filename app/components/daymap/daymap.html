<div class="container-fluid">
  <section class="module col-sm-12">
    <section class="module col-sm-12 col-md-12">
      <div class="module-body">
        <h1 class="voice voice-brand">UF/MBR Összesítő
          <b>{{vm.startdate}}</b>
        </h1>
        <div class="input-group col-sm-3">
          <span class="input-group-addon">Dátum:</span>
          <input type="text" class="datepicker form-control" ng-model="vm.startdate" setdate="0" end="{{vm.edate}}" ng-disabled="vm.load" ng-change="vm.start()">
        </div>
        <div class="input-group col-sm-3">
          <span class="input-group-addon">Szak:</span>
          <select ng-model="vm.search.shiftnum" class="form-control">
            <option value="">Mind</option>
            <option ng-repeat="pns in [1,3]" value="{{pns}}">{{pns == 1?'DE':'ÉJ'}}</option>
          </select>
        </div>
        <sup class="pull-right">Legutóbbi frissítés: {{vm.refdate}}, következő frissítés: {{vm.newrefdate}}</sup>
        <hr>
        <div class="progress progress-info progress-striped active" ng-hide="!vm.load">
          <div class="progress-bar" style="width: 100%">
            <p class="text-center">Frissítés...</p>
          </div>
        </div>

        <div class="row">

          <div class="bluemap">
            <table class="table detailsTable">
              <tr ng-repeat="sm in ['SheetMaker6', 'SheetMaker7', 'SheetMaker8'] track by $index">
                <td style="background-color:dimgray;color:white;">{{sm}}</td>
                <td style="background-color: #0099ff">
                  <span>{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'Totalsheets') - (vm.data | filter:vm.search
                    | filter:{MachineName:sm} | sumField:'ScrapSheets') | number:0}} lap</span>
                </td>
                <td style="background-color: #0099ff">{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'sumgoodaeq') | number:2}} aeq</td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align: middle;background-color:dimgray;color:white;">Potting4</td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align: middle;background-color: #0099ff">Be
                  <br>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'In' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'suminaeq'|number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align: middle;background-color: #0099ff">Fordít
                  <br>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'P3' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'sump3aeq'|number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align: middle;background-color: #0099ff">Ki
                  <br>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'Out' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{(vm.data | filter:vm.search | filter:{MachineName: 'Potting4'}) | sumField:'sumoutaeq'|number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align: middle;background-color:dimgray;color:white;">X3</td>
                <td ng-if="sm=='SheetMaker6'" rowspan="4" style="vertical-align:middle;background-color: #0099ff">
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X3',CLRework:0} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X3',CLRework:0} | sumField: 'aeq' |
                    number:2}}
                  </strong>
                  <br>
                  <sup>aeq</sup>
                  <hr>
                  <sup>Újraklórozva:</sup>
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X3',CLRework:1} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X3',CLRework:1} | sumField: 'aeq' |
                    number:2}}
                  </strong>
                  <br>
                  <sup>aeq</sup>
                </td>
              </tr>
              <tr>
                <td style="background-color:dimgray;color:white;">Összesen</td>
                <td style="background-color: #0099ff">
                  <strong>{{ (vm.filterSMs(['SheetMaker6', 'SheetMaker7', 'SheetMaker8']) | sumField:'Totalsheets') - (vm.filterSMs(['SheetMaker6',
                    'SheetMaker7', 'SheetMaker8']) | sumField:'ScrapSheets') |number:0 }} lap</strong>
                </td>
                <td style="background-color: #0099ff">
                  <strong>{{ vm.filterSMs(['SheetMaker6', 'SheetMaker7', 'SheetMaker8'] ) | sumField:'sumgoodaeq'|number:2 }} aeq</strong>
                </td>
              </tr>
            </table>
          </div>
          <div class="redmap">
            <table class="table detailsTable">
              <tr ng-repeat="sm in ['SheetMaker4', 'SheetMaker5', 'SheetMaker9'] track by $index">
                <td style="background-color:dimgray;color:white;">{{sm}}</td>
                <td style="background-color: #ff6666">
                  <span>{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'Totalsheets') - (vm.data | filter:vm.search
                    | filter:{MachineName:sm} | sumField:'ScrapSheets') | number:0}} lap</span>
                </td>
                <td style="background-color: #ff6666">{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'sumgoodaeq') | number:2 }} aeq</td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align: middle;background-color:dimgray;color:white;">Potting3
                  <br>Potting2</td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align: middle;background-color: #ff6666">Be
                  <br>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'In' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'suminaeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align: middle;background-color: #ff6666">Fordít
                  <br>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'P3' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'sump3aeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align: middle;background-color: #ff6666">Ki
                  <br>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'Out' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Potting2', 'Potting3']) | sumField:'sumoutaeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align: middle;background-color:dimgray;color:white;">X2</td>
                <td ng-if="sm=='SheetMaker4'" rowspan="4" style="vertical-align:middle;background-color: #ff6666">
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X2',CLRework:0} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X2',CLRework:0} | sumField: 'aeq' |
                    number:2}}
                  </strong>
                  <br>
                  <sup>aeq</sup>
                  <hr>
                  <sup>Újraklórozva:</sup>
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X2',CLRework:1} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X2',CLRework:1} | sumField: 'aeq' |
                    number:2}}
                  </strong>
                  <br>
                  <sup>aeq</sup>
                </td>
              </tr>
              <tr>
                <td style="background-color:dimgray;color:white;">Összesen</td>
                <td style="background-color: #ff6666">
                  <strong>{{ (vm.filterSMs(['SheetMaker4', 'SheetMaker5', 'SheetMaker9']) | sumField:'Totalsheets') - (vm.filterSMs(['SheetMaker4',
                    'SheetMaker5', 'SheetMaker9']) | sumField:'ScrapSheets') |number:0 }} lap</strong>
                </td>
                <td style="background-color: #ff6666">
                  <strong>{{ vm.filterSMs(['SheetMaker4', 'SheetMaker5', 'SheetMaker9'] ) | sumField:'sumgoodaeq'|number:2 }} aeq</strong>
                </td>
              </tr>
            </table>
          </div>
          <div class="greenmap">
            <table class="table detailsTable">
              <tr ng-repeat="sm in ['SheetMaker1', 'SheetMaker2'] track by $index">
                <td style="background-color:dimgray;color:white;">{{sm}}</td>
                <td style="background-color: #009900">
                  <span>{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'Totalsheets') - (vm.data | filter:vm.search
                    | filter:{MachineName:sm} | sumField:'ScrapSheets') | number:0}} lap</span>
                </td>
                <td style="background-color: #009900">{{ (vm.data | filter:vm.search | filter:{MachineName:sm} | sumField:'sumgoodaeq') | number:2 }} aeq</td>
                <td ng-if="sm=='SheetMaker1'" style="vertical-align: middle;background-color:dimgray;color:white;">Potting 1</td>
                <td ng-if="sm=='SheetMaker1'" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Potting']) | sumField:'In' | number:0}}
                  <br>
                  <sup>block</sup>
                  <!--<br><strong>{{vm.filterSMs(['Potting']) | sumField:'suminaeq' | number:2}}</strong><br><sup>AEq</sup>-->
                </td>
                <td ng-if="sm=='SheetMaker1'" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Potting']) | sumField:'P3' | number:0}}
                  <br>
                  <sup>block</sup>
                  <!--<br><strong>{{vm.filterSMs(['Potting']) | sumField:'sump3aeq' | number:2}}</strong><br><sup>AEq</sup>-->
                </td>
                <td ng-if="sm=='SheetMaker1'" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Potting']) | sumField:'Out' | number:0}}
                  <br>
                  <sup>block</sup>
                  <!--<br><strong>{{vm.filterSMs(['Potting']) | sumField:'sumoutaeq' | number:2}}</strong><br><sup>AEq</sup>-->
                </td>
                <td ng-if="sm=='SheetMaker2'" rowspan="3" style="vertical-align: middle;background-color:dimgray;color:white;">Static Potting S1</td>
                <td ng-if="sm=='SheetMaker2'" rowspan="3" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Static Potting S1']) | sumField:'In' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Static Potting S1']) | sumField:'suminaeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker2'" rowspan="3" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Static Potting S1']) | sumField:'P3' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Static Potting S1']) | sumField:'sump3aeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker2'" rowspan="3" style="vertical-align: middle;background-color: #009900">{{vm.filterSMs(['Static Potting S1']) | sumField:'Out' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.filterSMs(['Static Potting S1']) | sumField:'sumoutaeq' | number:2}}</strong>
                  <br>
                  <sup>aeq</sup>
                </td>
                <td ng-if="sm=='SheetMaker1'" rowspan="4" style="vertical-align:middle;background-color:dimgray;color:white;">X1</td>
                <td ng-if="sm=='SheetMaker1'" rowspan="4" style="vertical-align:middle;background-color: #009900">
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X1',CLRework:0} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X1',CLRework:0} | sumField: 'aeq' |
                    number:2}}</strong>
                  <br>
                  <sup>AEq</sup>
                  <hr>
                  <sup>Újraklórozva:</sup>
                  {{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X1',CLRework:1} | sumField: 'amount' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{vm.data | filter:vm.search | filter:{End_Day:vm.startdate,Group:'X1',CLRework:1} | sumField: 'aeq' |
                    number:2}}</strong>
                  <br>
                  <sup>AEq</sup>
                </td>
              </tr>
              <tr>
                <td style="background-color:dimgray;color:white;">Összesen</td>
                <td style="background-color: #009900">
                  <strong>{{ (vm.filterSMs(['SheetMaker1', 'SheetMaker2']) | sumField:'Totalsheets') - (vm.filterSMs(['SheetMaker1',
                    'SheetMaker2']) | sumField:'ScrapSheets') |number:0 }} lap</strong>
                </td>
                <td style="background-color: #009900">
                  <strong>{{ vm.filterSMs(['SheetMaker1', 'SheetMaker2'] ) | sumField:'sumgoodaeq'|number:2 }} aeq</strong>
                </td>
              </tr>
            </table>
          </div>
          <div class="yellowmap">
            <table class="table detailsTable" style="margin-top:100px">
              <tr ng-repeat="sm in ['SheetMaker6', 'SheetMaker7', 'SheetMaker8'] track by $index">
                <td ng-if="sm=='SheetMaker6'" style="vertical-align:middle">
                  <strong style="display: block; border-bottom: 1px solid #ddd">Ki</strong>
                  <div class="row">
                    <div class="col-sm-6">{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'BP', Type: '!ZB500S'}) | sumField:'cnt'
                      | number:0}}
                      <br>
                      <sup>modul</sup>
                    </div>
                    <div class="col-sm-6">
                      <strong>{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'BP', Type: '!ZB500S'}) | sumField:'aeq'|number:2}}</strong>
                      <br>
                      <sup>AEq</sup>
                    </div>
                  </div>
                  <strong style="display: block; border-bottom: 1px solid #ddd">Rework</strong>
                  <div class="row">
                    <div class="col-sm-6">{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'Rework', Type: '!ZB500S'}) | sumField:'cnt'
                      | number:0}}
                      <br>
                      <sup>modul</sup>
                    </div>
                    <div class="col-sm-6">
                      <strong>{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'Rework', Type: '!ZB500S'}) | sumField:'aeq'|
                        number:2}}
                      </strong>
                      <br>
                      <sup>AEq</sup>
                    </div>
                  </div>
                  <strong style="display: block; border-bottom: 1px solid #ddd">Bökés</strong>
                  {{vm.data | filter:vm.search | filter:{machine: 'MTF', type: '!3149069'} | sumField:'BOKES' | number:0}}
                  <br>
                  <sup>Bökés</sup>
                  <br>
                  <strong>{{ ((vm.data | filter:vm.search | filter:{machine: 'MTF', type: '!3149069'}) | sumField:'BOKES')/((vm.data
                    | filter:vm.search | filter:{machine: 'MTF', type: '!3149069'}) | sumField:'sumaeq') | number:1}}</strong>
                  <br>
                  <sup>Bökés / AEq</sup>
                </td>
                <td ng-if="sm=='SheetMaker6'"  style="vertical-align:middle">
                  <strong style="display: block; border-bottom: 1px solid #ddd">Minősített</strong>
                  <br>{{(vm.data | filter:vm.search | filter:{machine: 'MTF', type: '!3149069'}) | sumField:'GRADED' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{(vm.data | filter:vm.search | filter:{machine: 'MTF', type: '!3149069'}) | sumField:'gradeaeq'| number:2}}</strong>
                  <br>
                  <sup>AEq</sup>
                </td>
              </tr>
            </table>
            <table class="table detailsTable" style="margin-top: 90px">
              <tr ng-repeat="sm in ['SheetMaker1', 'SheetMaker2'] track by $index">
                <td ng-if="sm=='SheetMaker1'"  style="vertical-align:middle">
                  <strong style="display: block; border-bottom: 1px solid #ddd">Ki</strong>
                  <div class="row">
                    <div class="col-sm-6">{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'BP', Type: 'ZB500S'}) | sumField:'cnt'
                      | number:0}}
                      <br>
                      <sup>modul</sup>
                    </div>
                    <div class="col-sm-6">
                      <strong>{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'BP', Type: 'ZB500S'}) | sumField:'aeq'|number:2}}</strong>
                      <br>
                      <sup>AEq</sup>
                    </div>
                  </div>
                  <strong style="display: block; border-bottom: 1px solid #ddd">Rework</strong>
                  <div class="row">
                    <div class="col-sm-6">{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'Rework', Type: 'ZB500S'}) | sumField:'cnt'
                      | number:0}}
                      <br>
                      <sup>modul</sup>
                    </div>
                    <div class="col-sm-6">
                      <strong>{{(vm.data | filter:vm.search | filter:{ machine: 'Rework', state: 'Rework', Type: 'ZB500S'}) | sumField:'aeq'|
                        number:2}}
                      </strong>
                      <br>
                      <sup>AEq</sup>
                    </div>
                  </div>
                  <strong style="display: block; border-bottom: 1px solid #ddd">Bökés</strong>
                  {{vm.data | filter:vm.search | filter:{machine: 'MTF', type: '3149069'} | sumField:'BOKES' | number:0}}
                  <br>
                  <sup>Bökés</sup>
                  <br>
                  <strong>{{ ((vm.data | filter:vm.search | filter:{machine: 'MTF', type: '3149069'}) | sumField:'BOKES')/((vm.data
                    | filter:vm.search | filter:{machine: 'MTF', type: '3149069'}) | sumField:'sumaeq') | number:1}}</strong>
                  <br>
                  <sup>Bökés / AEq</sup>
                </td>
                <td ng-if="sm=='SheetMaker1'"  style="vertical-align:middle"><strong style="display: block; border-bottom: 1px solid #ddd">Minősített</strong><br>{{(vm.data | filter:vm.search | filter:{machine: 'MTF', type: '3149069'}) | sumField:'GRADED' | number:0}}
                  <br>
                  <sup>modul</sup>
                  <br>
                  <strong>{{(vm.data | filter:vm.search | filter:{machine: 'MTF', type: '3149069'}) | sumField:'gradeaeq'| number:2}}</strong>
                  <br>
                  <sup>AEq</sup>
                </td>
              </tr>
            </table>
          </div>

        </div>
      </div>
    </section>


    <section class="module col-sm-12 col-md-12">
      <div class="module-body">

        <hr>

      </div>
    </section>
  </section>
</div>